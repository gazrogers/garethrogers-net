#!/bin/bash

cmd="$1"
shift
args="$@"

pass=0

run_test(){
	num=$1
	expected=$2
	got=$("$cmd" "$args")
	if cmp -s <(echo $got) <(echo $expected); then
		echo "Test #$num: $(printf '\e[1;32mPASS\e[0m')"
		pass=$((pass + 1))
	else
		echo "Test #$num: $(printf '\e[1;31mFAIL\e[0m') Expected: <$expected>, got: <$got>"
	fi
}

run_test 1 "9" <<EOD
|                    |
| \\                  |
|  \\                 |
|   \\                |
|    \\               |
|     \\              |
|      \\             |
|       \\            |
|        \\           |
|         \\          |
|          \\         |
|           \\        |
|            \\       |
|             \\      |
|              \\     |
|               \\    |
|                \\   |
|                 \\  |
|                    |
|                    |
----------------------

1 4 2 19 0 2 4 3 17 13 16
EOD

run_test 2 "72" <<EOD
|                    |
| \\                / |
|  \\              /  |
|   \\            /   |
|    \\          /    |
|     \\        /     |
|      \\      /      |
|       \\    /       |
|        \\  /        |
|                    |
|                    |
|                    |
|                    |
|                    |
|                    |
|                    |
|                    |
|                    |
|                    |
----------------------

15 10 3 8 18 19 0 6 7 10
EOD

run_test 3 "18" <<EOD
|                    |
| ////////////////// |
| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ |
| ////////////////// |
| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ |
| ////////////////// |
| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ |
| ////////////////// |
| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ |
| ////////////////// |
| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ |
|                    |
----------------------

1 4 18 17 14 2 0 19 15
EOD

run_test 4 "73" <<EOD
|                    |
|  \\ / /\\     \\    / |
|        / /  / \\ \\  |
|   /        \\   /   |
|    /     /    /\\   |
| /\\          //\\  //|
|    /\\  \\      \\    |
|  / /            / /|
|       /     \\      |
|                    |
----------------------

19 19 12 13 11 7 15 11 16 8 12 1 13 9
EOD

run_test 5 "59" <<EOD
|                    |
|   \\     /   /      |
| \\   /        \\     |
|       \\\\  /        |
| \\ / \\      \\ /  /  |
|   ///   /  /    \\\\ |
|\\ \\  \\\\\\  \\    /    |
|                    |
----------------------

19 10 14 19 1 11 15 0 16 19 16 15 15 9 14
EOD

run_test 6 "66" <<EOD
|                    |
|    /  \\      //\\   |
|     \\ /   \\      \\ |
|                 \\  |
|  \\\\ \\   / /        |
|\\     \\     /     \\ |
|    \\ \\ //\\         |
| / \\ /      / //\\   |
|     //  // /   \\\\  |
|\\   \\             \\ |
| \\ \\ //\\    // \\ /  |
|   \\  /        //   |
|     /       /      |
|  \\ /     /        /|
| / /   /      //\\   |
|  \\ \\ / /    \\    \\ |
|     /         \\    |
|                    |
----------------------

6 8 16 14 6 7 17 2 3 0 9 10 14
EOD

run_test 7 "52" <<EOD
|                    |
|\\    //\\      /\\\\ / |
|       / //\\        |
|  // /    \\ \\ //\\   |
|        /    \\   \\  |
| \\ / /          \\   |
|     /            \\ |
|  /    /        //  |
|  /   /             |
|   \\          \\   \\ |
|      /  /  /       |
|    \\  //\\    / \\   |
|      /   \\ /  //\\ /|
|    \\      /     /  |
|                    |
----------------------

5 18 7 11 11 6 2 7 0 15 5 15 1 17 6 6
EOD

run_test 8 "20" <<EOD
|                    |
|\\       \\  \\        |
|   //\\  \\  /        |
|      /    //       |
|     /     /\\ \\     |
|    /   //\\    /   /|
|    /\\  \\ \\ \\ \\ \\   |
| / /  //\\     //\\ / |
|        \\  \\    \\  /|
|           /        |
|\\  \\      \\  \\ /    |
|                  //|
|                    |
----------------------

6 3 14 4 8
EOD

run_test 9 "37" <<EOD
|                    |
|  /         / /\\ \\  |
| //\\  \\  \\    \\\\   /|
|   \\      \\\\  //    |
|    \\\\              |
|  /\\         /\\  \\  |
|         /  / / /   |
| \\ \\  / / /    \\    |
|   \\            \\  /|
|  /      \\   \\  /  /|
|          \\     \\   |
|   ///  /   \\\\    / |
|  \\ \\     \\\\  // /\\ |
|    \\    / \\  / /   |
|\\     \\  \\     ///\\ |
|     / \\   \\ \\ \\ /  |
|     / /\\ /\\        |
|      \\ //\\ /\\  /  /|
|   /   /\\  \\       /|
|   /    //     / /\\ |
| /     \\        \\   |
|       /    \\  //   |
| \\             /   /|
| /  /  \\      \\     |
|                    |
----------------------

7 1 17 13 2 15 2 2 6 4 19
EOD

run_test 10 "83" <<EOD
|                    |
|    //\\ \\\\  /\\ / // |
|  /      //         |
|  //\\  \\   /        |
| /  \\\\  \\ \\   \\     |
|\\   //\\   // /      |
|                    |
----------------------

0 14 17 6 5 13 18 14 6 7 9 6 15 14 4 3 0
EOD

run_test 11 "54" <<EOD
|                    |
|         \\          |
|  \\     /    /      |
|       \\   \\   \\ \\  |
| \\   /  //\\  /   /  |
| /   /  //   \\  \\   |
|  /         / /  // |
|      \\   \\         |
|  \\   /    /  \\ \\  /|
| / \\    /          /|
|          \\       \\ |
| \\  /   /    \\ /\\   |
|   // // \\  \\       |
|                    |
----------------------

5 10 9 7 0 19 6 5 19 16 18 6 16 10 16
EOD

run_test 12 "65" <<EOD
|                    |
|      \\  //\\   \\ /  |
|     \\     // \\ \\   |
|   /\\        \\      |
|\\  \\\\  //\\ / / /    |
|\\  ///      // \\    |
|  /         /    \\ /|
|   //       / /   //|
|\\  \\            \\   |
| \\    /       /\\ \\  |
|     \\       /      |
|        //\\\\    /   |
|           \\    \\   |
|\\       /  \\     /  |
|              \\     |
|        /         \\ |
|   /     /   /  /// |
|   / \\              |
|  \\  \\ \\\\ ////      |
|                    |
----------------------

0 6 11 9 18 19 12 13 7 15 11 4 18 3 0
EOD

run_test 13 "113" <<EOD
|                    |
|           //\\\\     |
| /\\            \\    |
|          /    // / |
|  \\ /\\ \\     /  / \\ |
|\\  \\  \\\\\\  \\    //  |
|    \\\\ ///\\ /     //|
|    //\\             |
| \\          \\       |
|          / \\   /   |
| /   /   \\\\   \\ /   |
|   /       / \\    \\ |
|        \\     //\\ / |
|   \\      //   \\   /|
| /         \\  /     |
| \\          \\  \\   /|
|    /         \\     |
| //\\ \\ \\   /    /\\  |
|   \\        /       |
| //\\   \\ \\    \\   \\ |
|                    |
----------------------

8 6 6 2 10 12 6 4 19 9 11 8 8 7 12
EOD

run_test 14 "47" <<EOD
|                    |
|   /  //\\    /    \\ |
|         \\          |
|\\ / \\      \\   / /  |
|\\ \\\\    //\\ /  /\\ / |
| \\ /  \\     \\ /   / |
| \\  /    \\     /  / |
|      / /\\ \\        |
| /\\    / //\\   / // |
| /  \\            /\\ |
|  \\         //\\   / |
|   /\\  \\    \\\\      |
|\\     \\            /|
|         \\  \\ \\     |
| /\\ /      \\ \\  /   |
|      \\ / /       / |
| / \\        //\\  /  |
|\\       \\  / /      |
| \\       \\ \\ \\      |
| / /     \\\\ //\\\\    |
| /         /  //\\   |
|                    |
----------------------

9 15 16 3 12 16 12 5 5
EOD

run_test 15 "37" <<EOD
|                    |
|     //    //\\      |
|           \\    \\   |
|        /         //|
|     \\     / \\ \\  //|
| \\               /  |
|   \\   \\      //\\   |
|   /        / / \\  /|
|    \\  \\ /  \\    /  |
|           \\        |
| / \\             \\  |
|     //\\  //\\     / |
|              /   \\ |
|  /\\        \\       |
|                    |
----------------------

0 1 7 8 9 18 10
EOD

run_test 16 "80" <<EOD
|                    |
|  \\    \\     /   \\  |
|     /          /   |
| /     \\ \\    \\  // |
|\\\\\\        /  \\     |
|      /        /  / |
|  /  //\\          / |
|   \\ \\  \\ \\         |
|\\     \\    //   /   |
|  \\ / //   \\   /    |
|         \\   \\\\     |
|    \\         ///\\  |
| \\   /     //      /|
|      /          /  |
| /              /   |
| \\ \\ \\    //\\      /|
|     \\ /   /    \\   |
| /\\  /      //\\\\\\   |
|  / /   / \\   /     |
|   / //\\\\         \\ |
|                    |
----------------------

3 18 16 0 13 17 12 12 4 3 13 5 7 2 8 3 2 1 12
EOD

run_test 17 "54" <<EOD
|                    |
| \\  / /\\  \\  \\      |
|       /            |
|      /   \\\\ /  / / |
|  \\         /  /    |
|  \\ //\\  / /       /|
| \\       /        / |
|  /          /      |
|            \\\\   \\  |
|  / //\\    \\      \\ |
|  /    // //\\\\      |
|   /       /   /   /|
|     /  /  /\\   \\   |
|  \\   \\    \\  /  // |
|     \\ /     \\  /   |
|     /   /  /   /   |
|\\    //        \\    |
|                    |
----------------------

13 2 10 8 17 7 8 9 6 4 17 13 6
EOD

run_test 18 "17" <<EOD
|                    |
|  / /         \\ \\   |
| // / /\\ //  \\     /|
|     //    /   \\   /|
|      / \\ \\\\\\       |
|     //       \\     |
| /\\       / \\   /\\\\ |
|    \\ /     //\\   \\ |
|  / \\        /  \\ \\ |
|      /  /          |
|\\  / \\       \\      |
|  \\            /  / |
|          \\ /  \\    |
|          / /       |
|    \\   /   /    /  |
|      //\\    /      |
|\\  /      // \\\\\\   /|
|\\           //\\    /|
|     /   \\     /   /|
|                    |
----------------------

14 19 18 7 6
EOD

run_test 19 "17" <<EOD
|                    |
| \\\\ \\        \\      |
|    \\         \\   \\ |
|\\ //\\ / \\           |
| / /\\   \\     /  \\  |
|   \\ \\ /   /     /\\ |
| //  \\ /           /|
|    \\ \\  \\  /  /  \\ |
|                    |
----------------------

7 19 16 1 18 6
EOD

run_test 20 "38" <<EOD
|                    |
|         \\  \\    \\  |
|  \\ /\\          /   |
|   \\ //  //   \\  /  |
|\\\\      //\\         |
| /       //\\     \\  |
|           /  \\     |
| \\   \\\\ /        \\\\ |
| /       /\\   \\     |
|   /\\   /      /    |
|  //   //  \\        |
|\\ \\       /      \\  |
| \\    \\ \\     ///   |
|   \\    /   //\\     |
|     / /  //\\  ///  |
| / //\\ /  \\\\       /|
|     \\   \\ //\\  //  |
|   \\\\ \\      \\      |
| /     \\    \\   /   |
| \\  //   /   \\\\ / \\ |
|   \\  /   //     \\  |
| /\\     \\     /  \\ /|
| /\\ \\         // \\\\ |
|\\    / \\     /   /  |
|   \\  \\\\    \\  \\    |
|                    |
----------------------

16 10 4 14 16 12 14
EOD

run_test 21 "70" <<EOD
|                    |
| / \\   /   / //\\\\ / |
|\\      /      //    |
| \\ /  /  //\\  /     |
| /\\ /\\ \\\\  //\\    \\ |
|   \\     / /        |
|     /        \\ /\\  |
|    / \\\\  \\\\\\    // |
|      /   \\ \\   /   |
|    / //\\ /\\   \\ /  |
|  /    /        /// |
|      /  //\\    /   |
|    / \\          /  |
|   /  //\\ / /      /|
|                    |
----------------------

3 2 1 5 15 5 19 13 10 1 6 3 14 18 3 11 1 4
EOD

run_test 22 "40" <<EOD
|                    |
|      \\ /         \\ |
|          /\\ /\\    /|
|       \\\\        /\\ |
|    \\\\         /    |
| //\\ \\   / \\ \\ \\\\ / |
| /\\   \\ /\\         /|
|      \\\\     /      |
|\\\\    /  /        / |
|     \\ \\    /     / |
|    /\\    / /   \\   |
|              /     |
|      \\  \\ /\\   \\   |
|                    |
----------------------

17 16 18 14 18 5 1 7 14 16 0
EOD

run_test 23 "46" <<EOD
|                    |
|     /   /    /  /  |
|   /    \\ /     \\   |
|   /  \\   /   /  \\  |
|   // \\       /   \\ |
|\\    /      /    /  |
|    /  / /  \\    \\  |
| / \\\\       \\  \\    |
|   / /   //\\ // / / |
| /  \\    \\   / \\ /  |
|  \\               / |
| /  /\\    /  /   \\  |
|                    |
----------------------

18 13 15 3 18 6 5 11 17 5 9
EOD

run_test 24 "42" <<EOD
|                    |
| \\ / \\          /   |
|       //\\    /     |
|  \\    /  //\\\\\\     |
|\\       //    / /   |
|  \\ /\\        /  /  |
|                    |
----------------------

0 3 2 16 16 9 16 16 10 3
EOD

run_test 25 "38" <<EOD
|                    |
|       /   //\\  /   |
| /        /         |
|  \\         \\    \\  |
|        / // \\      |
|       \\\\     /     |
|  /   \\   / //\\ \\ \\ |
|     \\     \\ //    /|
| \\  \\     /  //\\   /|
| / \\ \\      \\  //\\  |
|   // \\ /  / \\      |
|  \\           /     |
|     /   \\       /\\ |
|  //   /  /       \\ |
|           // \\   \\ |
|       \\        /  /|
| \\ \\   \\ \\  \\       |
| //      /          |
|                    |
----------------------

4 2 3 18 6 13 11 14 18 19
EOD

run_test 26 "44" <<EOD
|                    |
| \\  /\\ \\   / \\\\  \\ /|
|    \\     \\   /  /  |
|       / \\\\\\ //\\\\ / |
|    / /   \\   /  \\  |
|\\   \\   /    \\    / |
|   \\ /\\\\ / /        |
| \\\\     /   ////\\   |
|                    |
----------------------

4 17 8 19 3 5 17 10 7 3
EOD

run_test 27 "61" <<EOD
|                    |
|        \\     /     |
|  /       / \\       |
|  \\   / /           |
|       \\     /      |
| /  ///\\  \\     /   |
|         /  / / \\   |
|  / \\\\ \\ \\\\\\ \\  //\\ |
|    \\  /   \\ //     |
| /        \\   / \\   |
| /        \\    / /  |
|        //   \\ \\    |
|\\      \\ \\          |
|   /  \\ //\\  //\\\\  /|
| /  /    \\\\  /   /  |
|   //       \\ //\\   |
|                    |
----------------------

14 4 15 7 14 8 12 19 9 14 10 1
EOD

run_test 28 "97" <<EOD
|                    |
|      \\\\  \\ \\    \\  |
|          \\ /\\   /  |
|       \\\\   \\       |
|    \\ //\\        \\\\ |
|\\          /        |
|  //  \\ \\  //\\  //\\ |
|\\  \\    \\      /    |
| \\   /   \\  / \\  \\  |
|           //  /    |
|  //   /        \\   |
|                    |
----------------------

13 10 9 16 7 6 4 8 19 19 14 8 16 16 16 10
EOD

run_test 29 "99" <<EOD
|                    |
|   /\\        / //   |
|  \\   \\  \\       /  |
|  \\\\     \\          |
|  //\\ \\ / //\\  \\    |
| / /  //        \\\\  |
|   \\ / \\   /    \\  /|
|          /     /   |
|  /\\     /\\     /   |
| ///\\            /\\ |
|   \\  /  //  /      |
|            \\ \\     |
|   /    \\ /    /  \\ |
|    / /        /    |
|                    |
----------------------

11 5 18 10 11 12 2 16 0 5 11 15 11 19 13 0 9 2 4
EOD

run_test 30 "64" <<EOD
|                    |
|  //\\\\\\   \\ //\\     |
|    \\     /   \\     |
|     \\   /    /     |
|  \\   \\   / \\       |
|     \\ \\ //         |
|\\  /\\ \\   //        |
|                    |
----------------------

17 9 10 7 15 8 5 4 11
EOD

echo "$pass/$num passed"
